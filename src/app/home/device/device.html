<div class="container">
    <div class="mini-charts">
        <div class="row">
            <div class="col-sm-6 col-md-3">
                <div class="mini-charts-item bgm-indigo">
                    <div class="clearfix">
                        <div class="chart stats-bar" data-sparkline-bar="[6,4,8,6,5,6,7,8,3,5,9,5,8,4,3,6,8]"></div>
                        <div class="count">
                            <small>总数</small>
                            <h2>{{deviceCtrl.stats.total | myNumber : 0}}</h2>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="mini-charts-item bgm-deeporange">
                    <div class="clearfix">
                        <div class="chart stats-bar-2" data-sparkline-bar="[4,7,6,2,5,3,8,6,6,4,8,6,5,8,2,4,6]"></div>
                        <div class="count">
                            <small>未注册</small>
                            <h2>{{deviceCtrl.stats.standbyNum | myNumber : 0}}</h2>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="mini-charts-item bgm-green">
                    <div class="clearfix">
                        <div class="chart stats-bar-2" data-sparkline-bar="[4,7,6,2,5,3,8,6,6,4,8,6,5,8,2,4,6]"></div>
                        <div class="count">
                            <small>在线</small>
                            <h2>{{deviceCtrl.stats.onlineNum | myNumber : 0}}</h2>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="mini-charts-item bgm-bluegray">
                    <div class="clearfix">
                        <div class="chart stats-line" data-sparkline-line="[9,4,6,5,6,4,5,7,9,3,6,5]"></div>
                        <div class="count">
                            <small>离线</small>
                            <h2>{{deviceCtrl.stats.offlineNum | myNumber : 0}}</h2>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <h2>设备管理<small>对终端设备的运行状态进行监控.</small></h2>
            <div class="row">
                <div class="col-sm-6 col-md-4 cat-toolbar">
                    <button class="btn btn-default btn-icon-text" ng-if="homeCtrl.isAdmin" data-ng-click="deviceCtrl.checkAll()">
                        <i class="zmdi" data-ng-class="{ 'zmdi-close': deviceCtrl.allChecked, 'zmdi-check-all': !deviceCtrl.allChecked }"></i>
                        {{deviceCtrl.allChecked ? '取消全选' : '全选'}}
                    </button>
                    <button class="btn btn-danger btn-icon-text" ng-if="homeCtrl.isAdmin" data-ng-click="deviceCtrl.delBatch()">
                        <i class="zmdi zmdi-delete"></i> 批量删除
                    </button>
                    <a class="btn btn-info btn-icon-text" ng-if="homeCtrl.isAdmin" data-ui-sref="home.device-add">
                        <i class="zmdi zmdi-plus"></i> 新增
                    </a>
                </div>
                <div class="chat-search col-sm-6 col-md-8">
                    <div class="fg-line">
                        <input type="text" class="form-control"
                               placeholder="输入关键字后请按回车查询结果，支持按设备型号、地址、所属用户、手机号和备注模糊搜索"
                               data-ng-model="deviceCtrl.keyword">
                    </div>
                </div>
            </div>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table ng-table="deviceCtrl.tableData" class="table table-striped table-vmiddle">
                    <tr ng-repeat="row in $data">
                        <td data-title="''">
                            <div class="checkbox m-b-15">
                                <label>
                                    <input type="checkbox" data-ng-model="row.checked">
                                    <i class="input-helper"></i>
                                </label>
                            </div>
                        </td>
                        <td data-title="'NO.'" data-sortable="'id'">
                            {{ row.id }}
                        </td>
                        <td data-title="'设备id'" data-sortable="'eqId'">
                            {{ row.eqId }}
                        </td>
                        <td data-title="'配置文件'" data-sortable="'model'">
                            {{ row.model }}
                        </td>
                        <td data-title="'地址'" data-sortable="'path'">
                            {{ row.path }}
                        </td>
                        <td data-title="'状态'" data-sortable="'status'">
                            {{ row.status | enumDeviceStatus }}
                        </td>
                        <td data-title="'协议'" data-sortable="'b.name'">
                            {{ row.protocol }}
                        </td>
                        <td data-title="'用户'" data-sortable="'user'">
                            {{ row.user }}
                        </td>
                        <td data-title="'电话号码'" data-sortable="'phoneNum'">
                            {{ row.phoneNum }}
                        </td>
                        <td data-title="'备注'" data-sortable="'remark'">
                            {{ row.remark }}
                        </td>
                        <td data-title="'允许'" ng-if="homeCtrl.isAdmin" data-sortable="'enable'">
                            <!--允许-->
                            <div class="toggle-switch" data-ts-color="green">
                                <input id="{{row.id}}" type="checkbox" hidden="hidden" data-ng-model="row.enable"
                                       data-ng-click="deviceCtrl.enable(row)">
                                <label for="{{row.id}}" class="ts-helper"></label>
                            </div>
                        </td>
                        <td data-title="'修改'" ng-if="homeCtrl.isAdmin">
                            <!--修改-->
                            <button type="button" class="btn btn-default"
                                    data-ui-sref="home.device-update({id: row.id, page: deviceCtrl.page, count: deviceCtrl.count})">
                                <i class="zmdi zmdi-edit"></i>
                            </button>
                        </td>
                        <td data-title="'删除'" ng-if="homeCtrl.isAdmin">
                            <!--删除-->
                            <button type="button" class="btn btn-danger" data-ng-click="deviceCtrl.del(row)">
                                <i class="zmdi zmdi-delete"></i>
                            </button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>